# **Pocket SDR FE 4CH - An Open-Source GNSS SDR RF Frontend**

## **Overview**

Pocket SDR FE 4CH is an open-source GNSS SDR RF frontend device for Pocket SDR.
The device consists of 4 CH Maxim MAX2771 ([1]) GNSS RF front-end ICs (LNA, mixer,
filter, ADC, frequency synthesizer) and a Cypress EZ-USB FX3 USB 3.0 controller
([2], [3], [4]) to connect to host PCs. All the RF CHs are able to be configured for
GNSS L1 band (1525 - 1610 MHz), or GNSS L2/L5/L6 band (1160 - 1290 MHz).
The frequency of the reference oscillator (TCXO) is 24.000 MHz, and the ADC
sampling rate can be configured up to 48 Msps.

--------------------------------------------------------------------------------

## **Specifications**

* **Number of RF Inputs**: 1 CH
* **Number of RF Channels**: 4 CH
* **LO (PLL) Frequency**: 1525 ~ 1610 MHz (GNSS L1 band) or
                      1160 ~ 1290 MHz (GNSS L2/L5/L6 band)
* **IF Bandwidth**: 2.5 ~ 36 MHz
* **Sampling Rate**: 4, 6, 8, 10, 12, 16, 20, 24, 32, 40 or 48 Msps
* **Sampling Type**: I-sampling 2 or 3 bits, I/Q-sampling 2 bits
* **Host I/F**: USB 3.0 (USB 3.2 Gen1, super-speed 5Gbps), type-C
* **Power Supply**: 5V 240 mA, USB bus power

--------------------------------------------------------------------------------

## **Directory Structure and Contents**
```
FE_4CH --+-- FW     Pocket SDR FE 4CH F/W and build environment
         |   |
         |   +-- Packages
         |   +-- v3.0
         |       +-- .metadata
         |       +-- .project
         |       +-- pocket_fw_v3    ver.3.0
         |           +-- pocket_fw_v3.c  Source program of the F/W
         |           +-- gpif_conf.cyfx  GPIF II Designer file for the F/W
         |           +-- gpif_conf.h     header file generated by GPIF II Designer
         |           +-- pocket_usb_dscr.c USB device descriptors for the F/W
         |           +-- cyfx*.*         Cypress FX3 F/W framework
         |           +-- ...              
         |           +-- Release
         |               +-- pocket_fw_v3.img  Binary image of the F/W
         |               +-- ...
         |
         +-- HW     Pocket SDR FE 4CH hardware design data
             |
             +-- v3.0     ver.3.0 (PCB 4-layer, USB type-C)
                 +-- v3.0.kicad.*     KiCAD PCB and circuit design data
                 +-- v3.0.pretty      KiCAD module data
                 +-- v3.0_parts.xlsx  BOM (parts list) Excel data
                 +-- pocket_sdr_v3.0_sch.pdf circuit schematic PDF
                 +-- pocket_sdr_*.f3d Case panel Fusion 360 3D-CAD data
                 +-- pocket_sdr_v2.3-eagle-import.kicad_sym  KiCAD symbol data
                 +-- ...
```
--------------------------------------------------------------------------------

## **Rebuild F/W and Write F/W Image to Pocket SDR FE 4CH**

* Install Cypress EZ-USB FX3 Development Kit (ref [5]) to a Windows PC. As default,
it is installed to C:\Program Files (x86)\Cypress\EZ-USB FX3 SDK.
* Execute EZ USB Suite (EZ-USB FX3 SDK\1.3\Eclipse\ezUsbSuite.exe).
* Execute Menu File - Switch Workspace - Others, select <install_dir>\PocketSDR\FE_4CH\FW\v3.0
and open the workspace.
* Select pocket_fw_v3 in Project Explorer and execute Menu Project - Build All and
you can get a F/W image <install_dir>\PocketSDR\FE_4CH\FW/v3.0\pocket_fw_v3\Release\pocket_fw_v3.img.
* Disable EEPROM by connecting the J2 jumper pins on the Pocket SDR FE 4CH PCB and
attach the Pocket SDR FE 4CH via USB cable to the PC.
* Execute USB Control Center (EZ-USB FX3 SDK\1.3\bin\CyControl.exe).
* You can see "Cypress FX3 USB BootLoader Device".
* Re-enable EEPROM by disconnecting the J2 jumper pins on the Pocket SDR FE 4CH PCB.
* In USB Control Center, select "Cypress FX3 USB Bootloader Device", execute menu
Program - FX3 - I2C EEPROM, select the F/W image <install_dir>\PocketSDR\FE_4CH\FW\v3.0\pocket_fw_v3\Release\pocket_fw_v3.img
and open it.
* If you see "Programming succeeded." in status bar, the F/W is properly written
to the PocketSDR FE 4CH.

--------------------------------------------------------------------------------

## **References**

[1] Maxim integrated, MAX2771 Multiband Universal GNSS Receiver, July 2018

[2] Infineon, CYUSB301X, CYUSB201X, EZ-USB FX3 SuperSpeed USB Controller Datasheet,
Rev. Z, September 29, 2022

[3] Cypress Semiconductor, EZ-USB FX3 Technical Reference Manual, Rev.F, May 9, 2019

[4] Cypress Semiconductor, FX3 Programmers Manual, Rev.K

[5] Infineon, EZ-USB FX3 Software Development Kit
    (https://www.infineon.com/cms/jp/design-support/tools/sdk/usb-controllers-sdk/ez-usb-fx3-software-development-kit/)

